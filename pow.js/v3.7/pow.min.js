/**
 * @license MIT
 * @author IFYates <https://github.com/ifyates/pow.js>
 * @description A very small and lightweight templating framework.
 * @version 3.7.0
 */
let e="$data",t="$parent",r="$path",n="$root",a="array",o="each",l="else",i="template",s="innerHTML",c="outerHTML",f="replace",p="replaceWith",$=/{{\s*(.*?)\s*}}/gs,u=(e,t,r)=>e.setAttribute(t,r),d=(e,t)=>e.removeAttribute(t),m=e=>e.cloneNode(1),g=(e,t)=>t?e:e[f](/({|p)({|ow)/g,"$1​$2​"),h=e=>"_"+Math.random().toString(36).slice(2),y=(e,t)=>e[p](document.createRange().createContextualFragment(t)),w=(e,t)=>(e.content??e).querySelectorAll(t),v=v=>{let b=v[s],N=[...v.attributes],A="$pow"+h(),B={},O=(n,b,N,I)=>{let M=(e,t,r)=>($.lastIndex=0,(r=$.exec(e))?r[0].length+r.index==e.length?W(r[1],t):S(e):W(e,t)),S=e=>e[f]($,((e,t)=>W(t)??"")),W=(e,t,n=_(b))=>{try{let r=x._eval(e,n);return!t&&r?.call?(window[A][t=h()]=e=>r.call(e,n),`${A}.${t}(this)`):r}catch(t){console.warn("Interpolation failed",{[r]:b[r],expr:e},t)}},_=r=>({...r[e],...r,[t]:r[t]&&_(r[t])}),k=(e,t,r=n.nextElementSibling)=>(!e&&r?.attributes.pow&&d(r,l),t|!e&&!n.remove());for(let e of[...w(n,"*")].filter((e=>e.tagName.startsWith("POW:"))))y(e,e[c][f](/^<pow:([\w-]+)/i,`<${i} pow ${i}="$1"`));for(let e of w(n,"*[pow][stop]"))y(e,g(e[c]));d(n,"pow");let E=0;for(let{name:c,value:$}of[...n.attributes]){if(d(n,c),c==i&&!k(I=document.getElementById($))){let e={},t=null;for(let r of w(n,i))t??=r[s],e[r.id]=r[s];return t??=n[s],n[s]=I[s][f](/<param(?:\s+id=["']([^"']+)["'])?\s*\/?>/g,((r,n)=>n?e[n]||"":t)),O(n,{...b,$content:e})}if(I=t=>I=$?M($):b[e],c==a||c==o&&n.localName==i){I=!I()|Array.isArray(I)?I:Object.entries(I).map((([e,t])=>({key:e,value:t})));for(let o=0;o<I?.length;++o){let l=m(n);n.parentNode.insertBefore(l,n),O(l,{...b,[r]:`${b[r]}.${$||a}[${o}]`,[e]:I[o],[t]:b,$index:o,$first:!o,$last:o>I.length-2,$array:I,$prev:o?I[o-1]:"",$next:o<I.length-1?I[o+1]:""})}return k(I?.length,1)}if(c==o){if(I=!I()|Array.isArray(I)?I:Object.entries(I).map((([e,t])=>({key:e,value:t}))),I?.length){let o=m(n);n.parentNode.insertBefore(o,n),o[s]="";for(let l=0;l<I?.length;++l){let i=m(n);n.parentNode.insertBefore(i,n),O(i,{...b,[r]:`${b[r]}.${$||a}[${l}]`,[e]:I[l],[t]:b,$index:l,$first:!l,$last:l>I.length-2,$array:I,$prev:l?I[l-1]:"",$next:l<I.length-1?I[l+1]:""}),o[s]+=i[s],i.remove()}}return k(I?.length,1)}if("data"==c)return k(null!=I())?0:O(n,{...b,[r]:b[r]+"."+$,[e]:I,[t]:b},N);if("if"==c|"ifnot"==c){if(k("if"==c!=!I()))return}else{if(":"==c[0])return I()&&u(n,c.slice(1),I),O(n,b,N);if(":"==c.at(-1))b={...b,[e]:{...b[e],[c.slice(0,-1)]:I()}};else{if(c==l)return n.remove();if("transform"==c)E=M($,1);else if("section"==c&&$){n.id=n.id||h(),B[$]=r=>(t.state[e]=r??t.state[e],I=m(t.element),j(I,(e=>{w(v,"#"+n.id)[0][p](I),O(I,t.state,1)}))),b={...b,$section:B[$]};let t={element:m(n),state:b}}else(I=g(S($),N))&&u(n,c,I)}}}for(;I=w(n,"[pow]:not([pow] [pow])")[0];)O(I,b);E?.call&&E.call(n,n,b),n[s]=g(S(n[s]),N),n.localName==i&&y(n,n[s])},j=(e,t)=>{if(j.$)return console.warn("Binding already in progress");j.$=1;try{t()}finally{e[s]=e[s][f](/​/g,""),delete j.$}return I.sections={...B},I},I={apply:t=>j(v,(a=>{v[s]=b;for(let e of N)u(v,e.name,e.value);window[A]={},O(v,{[r]:n,[e]:t,[n]:t},1),I.refresh=e=>I.apply(t)})),refresh:e=>{}};return I},x={apply:(e,t)=>v(e).apply(t),bind:v,_eval:(t,r,n=Object.entries(r).filter((e=>isNaN(e[0]))))=>new Function(...n.map((e=>e[0])),"return "+t).call(r[e],...n.map((e=>e[1])))};export default x;